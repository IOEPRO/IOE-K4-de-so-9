
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IOE LỚP 4 - ĐỀ SỐ 09 (200 CÂU)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
      :root {
        --primary: #4f46e5;
        --secondary: #10b981;
        --danger: #ef4444;
        --warning: #f59e0b;
      }
      body { 
        font-family: 'Plus Jakarta Sans', sans-serif; 
        background-color: #f8fafc; 
        margin: 0;
        overflow-x: hidden;
      }
      .font-nunito { font-family: 'Nunito', sans-serif; }
      .custom-scrollbar::-webkit-scrollbar { width: 6px; }
      .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
      .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
      @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }
      .animate-float { animation: float 3s ease-in-out infinite; }
      .glass {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }
      .btn-pop { transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
      .btn-pop:active { transform: scale(0.94); }
      .question-card-enter { animation: slideIn 0.5s cubic-bezier(0.23, 1, 0.32, 1) forwards; }
      @keyframes slideIn {
        from { opacity: 0; transform: translateY(30px) scale(0.95); }
        to { opacity: 1; transform: translateY(0) scale(1); }
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body class="antialiased">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useRef, useMemo } = React;

      const TOTAL_TIME = 45 * 60; // 45 phút
      const POINTS_PER_CORRECT = 10;

      const QuestionType = {
        MULTIPLE_CHOICE: 'MC',
        FILL_IN_BLANK: 'FIB',
        REARRANGE: 'RE'
      };

      const GameState = { START: 'START', PLAYING: 'PLAYING', FINISHED: 'FINISHED' };

      const RAW_QUESTIONS = [
        { id: 1, type: QuestionType.FILL_IN_BLANK, text: "___ John at home yesterday?", answer: "Was", exp: "Dùng 'Was' cho câu hỏi quá khứ với chủ ngữ số ít.", hint: "Thì quá khứ của động từ To Be cho 'John'." },
        { id: 2, type: QuestionType.REARRANGE, parts: ["you", "like", "do", "doing?", "What"], answer: "What do you like doing?", exp: "Cấu trúc: What + do + you + like + V-ing?", hint: "Hỏi về sở thích." },
        { id: 3, type: QuestionType.REARRANGE, parts: ["Can", "read", "a", "book?", "she"], answer: "Can she read a book?", exp: "Hỏi về khả năng: Can + S + V-inf?", hint: "Bắt đầu với 'Can'." },
        { id: 4, type: QuestionType.FILL_IN_BLANK, text: "She has three ______ on her desk.", img: "https://images.unsplash.com/photo-1550985543-49bee3167284?w=400", answer: "rulers", exp: "Rulers: những cái thước kẻ.", hint: "Dụng cụ kẻ đường thẳng (6 chữ cái)." },
        { id: 5, type: QuestionType.MULTIPLE_CHOICE, text: "Can Nam play table tennis? – Yes, he ___.", options: ["can", "can’t", "canot", "cannot"], answer: "can", exp: "Trả lời khẳng định: Yes, S + can.", hint: "Phù hợp với câu trả lời 'Yes'." },
        { id: 6, type: QuestionType.MULTIPLE_CHOICE, text: "She is ... Japan.", options: ["down", "up", "from", "under"], answer: "from", exp: "Be from: đến từ đâu.", hint: "Nói về quê hương." },
        { id: 7, type: QuestionType.MULTIPLE_CHOICE, text: "What subjects do you ___ ? – I don’t like Maths and Art.", options: ["dislike", "like", "don’t like", "love"], answer: "like", exp: "Hỏi sở thích: What subjects do you like?", hint: "Câu trả lời liên quan đến sự yêu thích." },
        { id: 8, type: QuestionType.MULTIPLE_CHOICE, text: "Peter can … a bike.", options: ["ride", "play", "stay", "drink"], answer: "ride", exp: "Ride a bike: đi xe đạp.", hint: "Hành động điều khiển xe đạp." },
        { id: 9, type: QuestionType.FILL_IN_BLANK, text: "S_ ORT", answer: "P", exp: "Sport: thể thao.", hint: "Chữ cái còn thiếu là 'P'." },
        { id: 10, type: QuestionType.FILL_IN_BLANK, text: "A: Good n_ _ _ _ , Mom. - B: Have a good sleep, my son.", answer: "ight", exp: "Good night: Chúc ngủ ngon.", hint: "Lời chúc trước khi ngủ (5 chữ cái)." },
        { id: 11, type: QuestionType.REARRANGE, parts: ["to", "Jenny.", "Happy", "birthday", "you,"], answer: "Happy birthday to you, Jenny.", exp: "Lời chúc sinh nhật cho Jenny.", hint: "Bắt đầu bằng 'Happy'." },
        { id: 12, type: QuestionType.FILL_IN_BLANK, text: "FRIE_ D", answer: "N", exp: "Friend: người bạn.", hint: "Chữ cái còn thiếu là 'N'." },
        { id: 13, type: QuestionType.FILL_IN_BLANK, text: "What is your h_ _ _ y? – I like drawing.", answer: "obb", exp: "Hobby: sở thích.", hint: "Từ có 5 chữ cái (Hobby)." },
        { id: 14, type: QuestionType.REARRANGE, parts: ["party.", "This", "is", "my birthday"], answer: "This is my birthday party.", exp: "Giới thiệu bữa tiệc sinh nhật.", hint: "Bắt đầu với 'This is'." },
        { id: 15, type: QuestionType.REARRANGE, parts: ["I’m", "well,", "too.", "very"], answer: "I’m very well, too.", exp: "Cấu trúc: I am + adj + too.", hint: "Bắt đầu với 'I'm'." },
        { id: 16, type: QuestionType.FILL_IN_BLANK, text: "All the water in the oceans and _ _ _ _ is salt water.", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2018/11/29/636790887695176741_Audio.mp3", answer: "sea", exp: "Sea: biển.", hint: "Từ có 3 chữ cái nghĩa là biển." },
        { id: 17, type: QuestionType.FILL_IN_BLANK, text: "Where _ _ _ the dolls?", answer: "are", exp: "Dolls số nhiều dùng 'are'.", hint: "Động từ To Be số nhiều." },
        { id: 18, type: QuestionType.FILL_IN_BLANK, text: "He is from _ _ _ _ _ _ _ _ _ .", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206402675416532_Audio.mp3", answer: "Singapore", exp: "Singapore: quốc đảo sư tử.", hint: "Tên một quốc gia bắt đầu bằng 'S'." },
        { id: 19, type: QuestionType.FILL_IN_BLANK, text: "Please _ _ _ _ me some more sugar.", answer: "give", exp: "Give me: đưa cho tôi.", hint: "Động từ nghĩa là cho/đưa (4 chữ cái)." },
        { id: 20, type: QuestionType.MULTIPLE_CHOICE, text: "Mary and Linda are ... .", img: "https://images.unsplash.com/photo-1574348996587-27da2f36ec46?w=400", options: ["painting pictures", "making puppets", "making boats", "painting masks"], answer: "making puppets", exp: "Making puppets: đang làm con rối.", hint: "Puppets có nghĩa là con rối." },
        { id: 21, type: QuestionType.MULTIPLE_CHOICE, text: "Are the books on the table? – Yes, they ... .", options: ["am", "is", "are", "to"], answer: "are", exp: "Yes, they are (To Be số nhiều).", hint: "Trả lời cho câu hỏi 'Are they...?'." },
        { id: 22, type: QuestionType.MULTIPLE_CHOICE, text: "Let’s draw a picture of a ... .", img: "https://images.unsplash.com/photo-1719027103866-feacf3a4f679?w=400", options: ["dog", "fish", "cat", "Monkey"], answer: "Monkey", exp: "Monkey: con khỉ.", hint: "Con vật này thích ăn chuối." },
        { id: 23, type: QuestionType.REARRANGE, parts: ["please.", "your", "book,", "Open"], answer: "Open your book, please.", exp: "Câu mệnh lệnh lịch sự.", hint: "Bắt đầu bằng 'Open'." },
        { id: 24, type: QuestionType.FILL_IN_BLANK, text: "Her father raises cows, sheep and _ _ _ _ _ on his farm.", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/12/1/636161990907660300_Audio.mp3", answer: "goats", exp: "Goats: những con dê.", hint: "Con vật này kêu be be (5 chữ cái)." },
        { id: 25, type: QuestionType.FILL_IN_BLANK, text: "Is he strong or _ _ _ _ ?", answer: "weak", exp: "Weak: yếu (trái nghĩa với strong).", hint: "Từ trái nghĩa với 'strong' (4 chữ cái)." },
        { id: 26, type: QuestionType.MULTIPLE_CHOICE, text: "Odd one out:", options: ["chair", "monkey", "rabbit", "fish"], answer: "chair", exp: "Chair là đồ vật, còn lại là con vật.", hint: "Tìm từ không phải là động vật." },
        { id: 27, type: QuestionType.FILL_IN_BLANK, text: "Everyday, I _ _ _ up early to do morning exercises.", answer: "get", exp: "Get up: thức dậy.", hint: "Động từ đi kèm với 'up'." },
        { id: 28, type: QuestionType.FILL_IN_BLANK, text: "_ _ _ are you? - I’m fine, thanks.", answer: "How", exp: "How are you?: Câu hỏi sức khỏe.", hint: "Từ dùng để hỏi sức khỏe." },
        { id: 29, type: QuestionType.FILL_IN_BLANK, text: "I wa_ born in October.", answer: "s", exp: "Was born: sinh ra.", hint: "Chữ cái còn thiếu của 'was'." },
        { id: 30, type: QuestionType.REARRANGE, parts: ["playing", "I like", "football", "in", "the rain."], answer: "I like playing football in the rain.", exp: "S + like + V-ing.", hint: "Bắt đầu với 'I like'." },
        { id: 31, type: QuestionType.MULTIPLE_CHOICE, text: "What _______ does Anh have? – She has three yo-yos.", options: ["books", "pens", "pets", "toys"], answer: "toys", exp: "Toys: đồ chơi (yo-yo là đồ chơi).", hint: "Yo-yo là gì?" },
        { id: 32, type: QuestionType.MULTIPLE_CHOICE, text: "Where is Mary from? – ...", options: ["She’s from England.", "She from England.", "She does England.", "England from"], answer: "She’s from England.", exp: "S + be from + Country.", hint: "Cần có động từ To Be." },
        { id: 33, type: QuestionType.REARRANGE, parts: ["My dad", "short", "but", "is", "handsome."], answer: "My dad is short but handsome.", exp: "Dùng 'but' để nối hai tính từ tương phản.", hint: "Bắt đầu với 'My dad'." },
        { id: 34, type: QuestionType.REARRANGE, parts: ["I have", "the week.", "of", "Maths", "every day"], answer: "I have Maths every day of the week.", exp: "Lịch học hàng ngày.", hint: "Bắt đầu với 'I have'." },
        { id: 35, type: QuestionType.FILL_IN_BLANK, text: "Their town is _ _ _ _ _ .", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/12/1/636162028476800629_Audio.mp3", answer: "small", exp: "Small: nhỏ (trái nghĩa với big).", hint: "Từ có 5 chữ cái nghĩa là nhỏ." },
        { id: 36, type: QuestionType.MULTIPLE_CHOICE, text: "Choose the word that has the underlined part pronounced differently from the others", options: ["Zoo", "School", "Book", "Food"], answer: "Book", exp: "Book /ʊ/ (âm ngắn), còn lại /uː/ (âm dài).", hint: "Để ý cách phát âm 'oo'." },
        { id: 37, type: QuestionType.REARRANGE, parts: ["is", "a student", "Oxford Primary School.", "Mary", "at"], answer: "Mary is a student at Oxford Primary School.", exp: "Mary là học sinh tại trường...", hint: "Bắt đầu với 'Mary'." },
        { id: 38, type: QuestionType.FILL_IN_BLANK, text: "Thank you very _ _ _ _.", answer: "much", exp: "Very much: rất nhiều.", hint: "Từ có 4 chữ cái (Much)." },
        { id: 39, type: QuestionType.FILL_IN_BLANK, text: "Her _ _ _ _ _ _ _ _ _ food is ice-cream.", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/12/1/636161990316877921_Audio.mp3", answer: "favourite", exp: "Favourite: được yêu thích nhất.", hint: "Từ có 9 chữ cái." },
        { id: 40, type: QuestionType.FILL_IN_BLANK, text: "Write the sent_ _ ces.", answer: "en", exp: "Sentences: những câu văn.", hint: "Phần còn thiếu của 'sentences'." },
        { id: 41, type: QuestionType.FILL_IN_BLANK, text: "CH_ _ KEN", answer: "IC", exp: "Chicken: con gà.", hint: "Chữ cái còn thiếu của 'Chicken'." },
        { id: 42, type: QuestionType.MULTIPLE_CHOICE, text: "My grandparents ___ to the radio.", options: ["listening", "are listening", "is listening", "listen"], answer: "listen", exp: "Thì hiện tại đơn với chủ ngữ số nhiều.", hint: "Hành động thường xuyên." },
        { id: 43, type: QuestionType.MULTIPLE_CHOICE, text: "What ... is this? – It’s blue.", options: ["colour", "name", "nice", "hi"], answer: "colour", exp: "What colour: hỏi về màu sắc.", hint: "Blue là một màu sắc." },
        { id: 44, type: QuestionType.REARRANGE, parts: ["is", "sunny", "The", "today.", "weather"], answer: "The weather is sunny today.", exp: "Mô tả thời tiết hôm nay.", hint: "Bắt đầu với 'The weather'." },
        { id: 45, type: QuestionType.MULTIPLE_CHOICE, text: "Choose the odd one:", options: ["write", "sing", "read", "friend"], answer: "friend", exp: "Friend là danh từ, các từ khác là động từ.", hint: "Tìm từ không chỉ hành động." },
        { id: 46, type: QuestionType.MULTIPLE_CHOICE, text: "… is your birthday? - It’s in July.", options: ["What", "How", "When", "Where"], answer: "When", exp: "When: khi nào.", hint: "Hỏi về thời gian." },
        { id: 47, type: QuestionType.FILL_IN_BLANK, text: "Tom’s from _ _ _ _ _ _ _ .", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2018/11/29/636790679070814804_Audio.mp3", answer: "America", exp: "America: nước Mỹ.", hint: "Tên một quốc gia (7 chữ cái)." },
        { id: 48, type: QuestionType.REARRANGE, parts: ["bed.", "The toys", "the", "on", "are"], answer: "The toys are on the bed.", exp: "Dùng 'are' cho số nhiều, giới từ 'on'.", hint: "Bắt đầu với 'The toys'." },
        { id: 49, type: QuestionType.REARRANGE, parts: ["badminton", "likes", "Her mother", "very much.", "playing"], answer: "Her mother likes playing badminton very much.", exp: "Mẹ cô ấy rất thích chơi cầu lông.", hint: "Bắt đầu với 'Her mother'." },
        { id: 50, type: QuestionType.MULTIPLE_CHOICE, text: "Listen and tick:", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206438387382635_Audio.mp3", options: ["My house is very small.", "My school is very big.", "My school is very small.", "My house is very big."], answer: "My house is very big.", exp: "Nghe nội dung mô tả ngôi nhà.", hint: "Chú ý từ 'house' và 'big'." },
        { id: 51, type: QuestionType.FILL_IN_BLANK, text: "My bir_ _ day is in December.", answer: "th", exp: "Birthday: sinh nhật.", hint: "Hai chữ cái còn thiếu của 'Birthday'." },
        { id: 52, type: QuestionType.MULTIPLE_CHOICE, text: "Where are the keys?", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/Thi_cac_cap/2020-2021/Lop4/Captruong/nghe/D1_7.mp3", options: ["They are on the table.", "They are under the car.", "They are in the car.", "They are in the living room."], answer: "They are under the car.", exp: "Under the car: dưới gầm xe.", hint: "Chú ý vị trí 'under'." },
        { id: 53, type: QuestionType.MULTIPLE_CHOICE, text: "_____ is your birthday? – It’s in March.", options: ["Where", "What", "When", "How"], answer: "When", exp: "When dùng để hỏi khi nào.", hint: "Hỏi về thời gian sinh nhật." },
        { id: 54, type: QuestionType.REARRANGE, parts: ["Last Sunday, I", "grandpa", "visited my", "the country.", "in"], answer: "Last Sunday, I visited my grandpa in the country.", exp: "Hành động đã xảy ra trong quá khứ.", hint: "Bắt đầu bằng 'Last Sunday'." },
        { id: 55, type: QuestionType.REARRANGE, parts: ["you, Nga", "How are", "fine. Thank", "you?", "– I’m"], answer: "How are you, Nga? – I’m fine. Thank you.", exp: "Câu chào hỏi sức khỏe.", hint: "Hỏi thăm Nga." },
        { id: 56, type: QuestionType.FILL_IN_BLANK, text: "A bee makes _ _ _ _ _ .", img: "https://images.unsplash.com/photo-1613548058193-1cd24c1bebcf?w=400", answer: "honey", exp: "Honey: mật ong.", hint: "Ong làm ra cái này (5 chữ cái)." },
        { id: 57, type: QuestionType.FILL_IN_BLANK, text: "The pictures are on the _ all.", answer: "w", exp: "Wall: bức tường.", hint: "Chữ cái đầu của 'Wall'." },
        { id: 58, type: QuestionType.MULTIPLE_CHOICE, text: "Don’t write … the walls.", options: ["on", "at", "in", "to"], answer: "on", exp: "On the wall: trên tường.", hint: "Giới từ chỉ vị trí bề mặt." },
        { id: 59, type: QuestionType.FILL_IN_BLANK, text: "L_ _ k at the picture.", answer: "oo", exp: "Look at: nhìn vào.", hint: "Động từ 'Nhìn'." },
        { id: 60, type: QuestionType.REARRANGE, parts: ["your best", "badminton, Mai?", "playing", "Do", "friends like"], answer: "Do your best friends like playing badminton, Mai?", exp: "Câu hỏi về sở thích của bạn thân.", hint: "Bắt đầu bằng 'Do'." },
        { id: 61, type: QuestionType.FILL_IN_BLANK, text: "Let’s play _ _ _ _ _ _ _ _ _ after school.", answer: "badminton", exp: "Badminton: cầu lông.", hint: "Môn thể thao dùng vợt và quả cầu." },
        { id: 62, type: QuestionType.MULTIPLE_CHOICE, text: "They are … .", options: ["pencils", "sharpeners", "rulers", "erasers"], answer: "rulers", exp: "Rulers: thước kẻ.", hint: "Dùng để kẻ thẳng." },
        { id: 63, type: QuestionType.REARRANGE, parts: ["birthday", "is", "His", "May.", "in"], answer: "His birthday is in May.", exp: "S + be + in + month.", hint: "Bắt đầu với 'His'." },
        { id: 64, type: QuestionType.FILL_IN_BLANK, text: "I got some great photo_ _ _ _ _ s of the party.", answer: "graph", exp: "Photographs: những bức ảnh.", hint: "Phần thiếu của 'Photographs'." },
        { id: 65, type: QuestionType.FILL_IN_BLANK, text: "My sister is a student at Hoang Mai Primary Sch_ _ _ .", answer: "ool", exp: "School: trường học.", hint: "Phần cuối của 'School'." },
        { id: 66, type: QuestionType.FILL_IN_BLANK, text: "This is an invitat_ _ n card.", img: "https://plus.unsplash.com/premium_vector-1718305034409-0c8c0436ff63?w=400", answer: "io", exp: "Invitation: lời mời.", hint: "Phần thiếu của 'Invitation'." },
        { id: 67, type: QuestionType.MULTIPLE_CHOICE, text: "Listen and tick:", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206435918083072_Audio.mp3", options: ["Where is your school?", "When is her birthday?", "Where is her school?", "When is your birthday?"], answer: "When is your birthday?", exp: "Nghe nội dung hỏi ngày sinh nhật.", hint: "Chú ý 'When' và 'your'." },
        { id: 68, type: QuestionType.FILL_IN_BLANK, text: "_ _ _ often do you do morning exercises?", answer: "How", exp: "How often: mức độ thường xuyên.", hint: "Từ hỏi tần suất." },
        { id: 70, type: QuestionType.FILL_IN_BLANK, text: "Where is he f_ _ m? – He is from England.", answer: "ro", exp: "From: đến từ.", hint: "Thiếu 'ro' trong 'From'." },
        { id: 71, type: QuestionType.MULTIPLE_CHOICE, text: "What’s this? - It’s a ... .", img: "https://plus.unsplash.com/premium_vector-1727953894718-668694769e34?w=400", options: ["bottle of wine", "bottle of water", "glass of milk", "cup of coffee"], answer: "bottle of water", exp: "Chai nước: bottle of water.", hint: "Vật đựng nước." },
        { id: 72, type: QuestionType.FILL_IN_BLANK, text: "He invites his friend to come into his _ _ _ _ .", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/12/1/636162028019768369_Audio.mp3", answer: "flat", exp: "Flat: căn hộ.", hint: "Căn hộ (4 chữ cái)." },
        { id: 73, type: QuestionType.MULTIPLE_CHOICE, text: "Why ... we come and visit Uncle Tom?", options: ["don’t", "have", "do", "aren’t"], answer: "don’t", exp: "Why don't we...?: dùng để đưa ra lời gợi ý.", hint: "Cấu trúc gợi ý." },
        { id: 74, type: QuestionType.MULTIPLE_CHOICE, text: "A: Is your school small? B: ..., it is.", options: ["No", "Yes", "Bye", "See you."], answer: "Yes", exp: "Khẳng định trường nhỏ.", hint: "Đồng ý." },
        { id: 75, type: QuestionType.MULTIPLE_CHOICE, text: "My birthday is ... April.", options: ["on", "at", "to", "in"], answer: "in", exp: "In + tháng.", hint: "Tháng April đi với giới từ nào?" },
        { id: 76, type: QuestionType.FILL_IN_BLANK, text: "There are two r_ _ _ _ _ .", img: "https://plus.unsplash.com/premium_vector-1722586231051-df3592b558d0?w=400", answer: "ulers", exp: "Rulers: những chiếc thước kẻ.", hint: "Những chiếc thước (số nhiều)." },
        { id: 77, type: QuestionType.FILL_IN_BLANK, text: " Brian is a good dr_ _ _ r.", img: "https://plus.unsplash.com/premium_vector-1755624387525-67470e462339?w=400", answer: "ive", exp: "Driver: tài xế.", hint: "Người lái xe." },
        { id: 78, type: QuestionType.REARRANGE, parts: ["to bed?", "do you", "time", "go", "What"], answer: "What time do you go to bed?", exp: "Hỏi về giờ đi ngủ.", hint: "Bắt đầu bằng 'What time'." },
        { id: 79, type: QuestionType.MULTIPLE_CHOICE, text: "This birthday cake is ... you", options: ["for", "on", "of", "to"], answer: "for", exp: "For you: cho bạn.", hint: "Món quà này 'cho' bạn." },
        { id: 80, type: QuestionType.MULTIPLE_CHOICE, text: "... the weather in Hanoi today?", options: ["What’s", "Where’s", "How’s", "And"], answer: "How’s", exp: "How's the weather: thời tiết thế nào?", hint: "Hỏi về tình trạng thời tiết." },
        { id: 81, type: QuestionType.FILL_IN_BLANK, text: " Do you want to c_ _ _ _ with me?", img: "https://plus.unsplash.com/premium_vector-1722190648996-ab8e9a2d18b3?w=400", answer: "ycle", exp: "Cycle: đạp xe.", hint: "Hành động đạp xe." },
        { id: 82, type: QuestionType.MULTIPLE_CHOICE, text: " How many stickers does the boy have?", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/Thi_cac_cap/2020-2021/Lop4/Captruong/nghe/D4_16.mp3", options: ["16", "60", "14", "40"], answer: "60", exp: "Nghe số lượng stickers (sixty).", hint: "Số 60." },
        { id: 83, type: QuestionType.MULTIPLE_CHOICE, text: "Choose the odd one out:", options: ["read", "sing", "blue", "play"], answer: "blue", exp: "Blue là màu sắc, các từ khác là động từ.", hint: "Từ không chỉ hành động." },
        { id: 84, type: QuestionType.MULTIPLE_CHOICE, text: "… do you like to eat? – I like pizza.", options: ["Which", "What", "How", "Who"], answer: "What", exp: "Hỏi vật/thứ gì đó.", hint: "Bạn thích ăn cái gì?" },
        { id: 85, type: QuestionType.FILL_IN_BLANK, text: "I’m in _ _ _ _ _4A.", answer: "class", exp: "Class: lớp học.", hint: "Tôi học 'lớp' 4A." },
        { id: 86, type: QuestionType.FILL_IN_BLANK, text: "A: How’s the weat_ _ r today? B: It’s very hot today.", answer: "he", exp: "Weather: thời tiết.", hint: "Thiếu 'he' trong 'Weather'." },
        { id: 87, type: QuestionType.MULTIPLE_CHOICE, text: "Before I go to bed at10 p.m., my mother says to me: ’’…, son.’’", options: ["Good morning", "Good night", "Good evening", "Good afternoon"], answer: "Good night", exp: "Chúc ngủ ngon.", hint: "Lời chúc đêm khuya." },
        { id: 88, type: QuestionType.FILL_IN_BLANK, text: "What _ _ _ _ does your family have breakfast?", answer: "time", exp: "What time: mấy giờ.", hint: "Từ hỏi về giờ." },
        { id: 89, type: QuestionType.FILL_IN_BLANK, text: "She has three _ _ _ _ _ _ _ _ _ on her desk.", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206440611946543_Audio.mp3", answer: "notebooks", exp: "Notebooks: những quyển vở.", hint: "Dùng để viết bài (9 chữ cái)." },
        { id: 90, type: QuestionType.FILL_IN_BLANK, text: "Tom can s_ _ _ k Vietnamese.", answer: "pea", exp: "Speak: nói.", hint: "Nói tiếng Việt." },
        { id: 91, type: QuestionType.REARRANGE, parts: ["my", "I love", "much.", "very", "mother"], answer: "I love my mother very much.", exp: "Tôi yêu mẹ tôi rất nhiều.", hint: "Bắt đầu với 'I love'." },
        { id: 92, type: QuestionType.REARRANGE, parts: ["volleyball.", "play", "Let’s"], answer: "Let’s play volleyball.", exp: "Hãy cùng chơi bóng chuyền.", hint: "Bắt đầu bằng 'Let's'." },
        { id: 93, type: QuestionType.REARRANGE, parts: ["is", "of October.", "Today", "third", "the"], answer: "Today is the third of October.", exp: "Hôm nay là mùng 3 tháng 10.", hint: "Bắt đầu bằng 'Today'." },
        { id: 94, type: QuestionType.FILL_IN_BLANK, text: "She is ha_ _ y because today is her birthday.", answer: "pp", exp: "Happy: vui vẻ.", hint: "Tính từ hạnh phúc." },
        { id: 95, type: QuestionType.MULTIPLE_CHOICE, text: "What ... do you go to school? - I go to school at six o’clock.", options: ["name", "time", "subjects", "many"], answer: "time", exp: "What time: mấy giờ.", hint: "Hỏi giờ đi học." },
        { id: 96, type: QuestionType.FILL_IN_BLANK, text: "Where is Simon f_ _ m? – He’s from England.", answer: "ro", exp: "From: đến từ.", hint: "Thiếu 'ro'." },
        { id: 97, type: QuestionType.FILL_IN_BLANK, text: "_ _ _ _ _ are many big and beautiful shopping centres in Singapore.", answer: "There", exp: "There are: có những.", hint: "Bắt đầu câu 'Có'." },
        { id: 98, type: QuestionType.FILL_IN_BLANK, text: "Nam: _ _ _ _ _ birthday, Tom! - Tom: Thank you!", answer: "Happy", exp: "Happy birthday: chúc mừng sinh nhật.", hint: "Chúc sinh nhật." },
        { id: 99, type: QuestionType.REARRANGE, parts: ["your", "me about", "Tell", "hobby, please."], answer: "Tell me about your hobby, please.", exp: "Hãy kể cho tôi nghe về sở thích của bạn.", hint: "Bắt đầu với 'Tell'." },
        { id: 100, type: QuestionType.REARRANGE, parts: ["have", "lessons", "do you", "on Monday?", "What"], answer: "What lessons do you have on Monday?", exp: "Thứ hai bạn học những tiết gì?", hint: "Bắt đầu với 'What'." },
        { id: 101, type: QuestionType.REARRANGE, parts: ["teddy", "any", "Are there", "bears on", "the bookshelf?"], answer: "Are there any teddy bears on the bookshelf?", exp: "Có gấu bông trên giá sách không?", hint: "Bắt đầu bằng 'Are there'." },
        { id: 102, type: QuestionType.FILL_IN_BLANK, text: "He was bor_ in May.", answer: "n", exp: "Born: được sinh ra.", hint: "Chữ cái cuối của 'born'." },
        { id: 103, type: QuestionType.FILL_IN_BLANK, text: "Uncle Ho’s birthday is on the nineteenth of M_ _ .", answer: "ay", exp: "May: tháng Năm.", hint: "Tháng Năm." },
        { id: 104, type: QuestionType.FILL_IN_BLANK, text: "- What colour is your plane?- It’s _ _ _ .", answer: "red", exp: "Red: màu đỏ.", hint: "Màu sắc (3 chữ cái)." },
        { id: 105, type: QuestionType.MULTIPLE_CHOICE, text: "Odd one out:", options: ["thirsty", "hungry", "full", "say"], answer: "say", exp: "Say là động từ, còn lại là tính từ.", hint: "Tìm từ không chỉ trạng thái cơ thể." },
        { id: 106, type: QuestionType.REARRANGE, parts: ["this afternoon?", "do", "What", "your father", "did"], answer: "What did your father do this afternoon?", exp: "Bố bạn đã làm gì chiều nay?", hint: "Bắt đầu với 'What'." },
        { id: 107, type: QuestionType.REARRANGE, parts: ["birthday", "My", "is", "in", "June."], answer: "My birthday is in June.", exp: "Sinh nhật tôi vào tháng Sáu.", hint: "Bắt đầu với 'My'." },
        { id: 108, type: QuestionType.FILL_IN_BLANK, text: "We are having _ _ Art lesson.", answer: "an", exp: "Dùng 'an' trước 'Art'.", hint: "Mạo từ số ít." },
        { id: 109, type: QuestionType.REARRANGE, parts: ["have", "any", "you", "toys?", "Do"], answer: "Do you have any toys?", exp: "Bạn có đồ chơi nào không?", hint: "Bắt đầu với 'Do'." },
        { id: 110, type: QuestionType.FILL_IN_BLANK, text: "My brother can c_ _ _ very well.", img: "https://plus.unsplash.com/premium_vector-1722927847190-dfeb8f345be9?w=400", answer: "ook", exp: "Cook: nấu ăn.", hint: "Nấu ăn (4 chữ cái)." },
        { id: 111, type: QuestionType.MULTIPLE_CHOICE, text: "Mary has ... dolls.", options: ["a", "an", "two", "and"], answer: "two", exp: "Dolls số nhiều.", hint: "Dùng số lượng phù hợp." },
        { id: 112, type: QuestionType.MULTIPLE_CHOICE, text: "The gym _______ new.", options: ["it", "it’s", "is", "its"], answer: "is", exp: "S + is + adj.", hint: "Động từ To Be." },
        { id: 113, type: QuestionType.FILL_IN_BLANK, text: "What _ _ _ _ _ is it? – It’s October.", answer: "month", exp: "Month: tháng.", hint: "Hỏi về tháng (5 chữ cái)." },
        { id: 114, type: QuestionType.REARRANGE, parts: ["This", "banana", "you.", "for", "is"], answer: "This banana is for you.", exp: "Quả chuối này cho bạn.", hint: "Bắt đầu với 'This'." },
        { id: 115, type: QuestionType.FILL_IN_BLANK, text: "A: What’s your _ _ _ _ y? - B: I like taking photos.", answer: "hobb", exp: "Hobby: sở thích.", hint: "Sở thích." },
        { id: 116, type: QuestionType.MULTIPLE_CHOICE, text: "Choose the odd one out:", options: ["Big", "My", "Small", "Large"], answer: "My", exp: "My là đại từ, còn lại là tính từ.", hint: "Tìm từ không chỉ kích thước." },
        { id: 117, type: QuestionType.MULTIPLE_CHOICE, text: "Tim: ... is Tom from? Mary: England.", options: ["What", "When", "Where", "How"], answer: "Where", exp: "Where...from: đến từ đâu.", hint: "Hỏi về nơi chốn." },
        { id: 118, type: QuestionType.REARRANGE, parts: ["and I", "shopping.", "going", "like", "My mother"], answer: "My mother and I like going shopping.", exp: "Mẹ tôi và tôi thích đi mua sắm.", hint: "Bắt đầu với 'My mother'." },
        { id: 119, type: QuestionType.FILL_IN_BLANK, text: "Ha_ _ y birthday to you, Alan.", answer: "pp", exp: "Happy: vui vẻ.", hint: "Tính từ trong câu chúc." },
        { id: 120, type: QuestionType.MULTIPLE_CHOICE, text: "Is Mary a student? - Yes, ... .", options: ["she is", "she does", "she doesn’t", "she isn’t"], answer: "she is", exp: "Đồng ý khẳng định.", hint: "Dùng To Be." },
        { id: 121, type: QuestionType.MULTIPLE_CHOICE, text: "...does Lan have literature? - On Tuesday and Saturday.", options: ["What", "When", "Where", "How many"], answer: "When", exp: "When hỏi khi nào.", hint: "Hỏi về thời gian." },
        { id: 122, type: QuestionType.FILL_IN_BLANK, text: "Phuong’s brother cann_ _ play volleyball.", answer: "ot", exp: "Cannot: không thể.", hint: "Không thể." },
        { id: 123, type: QuestionType.MULTIPLE_CHOICE, text: "___ you Australian, John?", options: ["Am", "Do", "Are", "Is"], answer: "Are", exp: "Are you...: bạn có phải.", hint: "To Be số nhiều." },
        { id: 124, type: QuestionType.FILL_IN_BLANK, text: "She is in the classr_ _ m.", answer: "oo", exp: "Classroom: lớp học.", hint: "Lớp học." },
        { id: 125, type: QuestionType.MULTIPLE_CHOICE, text: "Listen and tick:", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206447604044824_Audio.mp3", options: ["There are three books under the table.", "There are three boats on the table.", "There are three books on the table.", "There are three boxes on the table."], answer: "There are three boats on the table.", exp: "Nghe nội dung đồ vật trên bàn (boats).", hint: "Chú ý từ 'boats'." },
        { id: 126, type: QuestionType.FILL_IN_BLANK, text: "What is the d_ _ _ today? – It’s October the tenth.", answer: "ate", exp: "Date: ngày.", hint: "Ngày hôm nay." },
        { id: 127, type: QuestionType.REARRANGE, parts: ["an", "have", "We", "on Monday.", "English lesson"], answer: "We have an English lesson on Monday.", exp: "Chúng tôi có tiết Tiếng Anh vào thứ hai.", hint: "Bắt đầu bằng 'We'." },
        { id: 128, type: QuestionType.REARRANGE, parts: ["Mary", "skirt.", "a green", "has"], answer: "Mary has a green skirt.", exp: "Mary có chân váy xanh lá.", hint: "Bắt đầu với 'Mary'." },
        { id: 129, type: QuestionType.REARRANGE, parts: ["your", "is", "sister's", "Where", "room?"], answer: "Where is your sister's room?", exp: "Phòng của em gái bạn ở đâu?", hint: "Bắt đầu với 'Where'." },
        { id: 130, type: QuestionType.FILL_IN_BLANK, text: "I’m so_ _ y. I’m late.", answer: "rr", exp: "Sorry: xin lỗi.", hint: "Xin lỗi." },
        { id: 131, type: QuestionType.MULTIPLE_CHOICE, text: " This is my ... .", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206417649947497_Audio.mp3", options: ["workbook", "notebook", "homework", "Books"], answer: "notebook", exp: "Notebook: quyển vở.", hint: "Vở ghi bài." },
        { id: 132, type: QuestionType.MULTIPLE_CHOICE, text: "… to meet you, Alice.", options: ["Well", "Fine", "Nice", "Kind"], answer: "Nice", exp: "Nice to meet you.", hint: "Chào mừng." },
        { id: 133, type: QuestionType.FILL_IN_BLANK, text: "Little boys, let’s stomp like an e_ _ _ _ _ _ _ .", img: "https://plus.unsplash.com/premium_vector-1730546789269-72f7471ced60?w=400", answer: "lephant", exp: "Elephant: con voi.", hint: "Con vật khổng lồ." },
        { id: 134, type: QuestionType.MULTIPLE_CHOICE, text: "What subject do you like?", options: ["Cakes", "Maths", "Milk", "England"], answer: "Maths", exp: "Maths là môn học.", hint: "Tìm tên môn học." },
        { id: 135, type: QuestionType.MULTIPLE_CHOICE, text: "Odd one out:", options: ["cake", "kite", "doll", "school"], answer: "school", exp: "School là nơi chốn, còn lại là đồ vật.", hint: "Tìm từ khác loại." },
        { id: 136, type: QuestionType.REARRANGE, parts: ["small?", "big", "or", "your classroom", "Is"], answer: "Is your classroom big or small?", exp: "Lớp học bạn to hay nhỏ?", hint: "Câu hỏi bắt đầu với 'Is'." },
        { id: 137, type: QuestionType.FILL_IN_BLANK, text: "Today is S_ _ day. I don’t go to school.", answer: "un", exp: "Sunday: chủ nhật.", hint: "Ngày cuối tuần." },
        { id: 138, type: QuestionType.REARRANGE, parts: ["John", "likes to", "very much.", "play", "games"], answer: "John likes to play games very much.", exp: "John rất thích chơi trò chơi.", hint: "Bắt đầu với 'John'." },
        { id: 139, type: QuestionType.MULTIPLE_CHOICE, text: "I don’t like numbers so I don't like … .", options: ["Maths", "Music", "Art", "English"], answer: "Maths", exp: "Môn toán dùng nhiều con số.", hint: "Môn học số học." },
        { id: 140, type: QuestionType.FILL_IN_BLANK, text: " My father is helping me m_ _ _ a kite.", img: "https://media.istockphoto.com/id/538655414/vector/father-son-making-kite.webp?a=1&b=1&s=612x612&w=0&k=20&c=M7wwTQzjV8bAhvRN5BQmrZkKG-i8UYr5Smlv72Qa4Z8=", answer: "ake", exp: "Make a kite: làm diều.", hint: "Hành động tạo ra." },
        { id: 141, type: QuestionType.MULTIPLE_CHOICE, text: "The picture is _______ the window.", options: ["next", "next to", "front", "in front"], answer: "next to", exp: "Next to: bên cạnh.", hint: "Giới từ chỉ vị trí." },
        { id: 142, type: QuestionType.REARRANGE, parts: ["My", "a", "is", "mother", "doctor."], answer: "My mother is a doctor.", exp: "Mẹ tôi là bác sĩ.", hint: "Bắt đầu với 'My mother'." },
        { id: 143, type: QuestionType.FILL_IN_BLANK, text: "Can your brother p_ _ y football?", answer: "la", exp: "Play: chơi.", hint: "Hành động chơi." },
        { id: 144, type: QuestionType.MULTIPLE_CHOICE, text: "Choose the odd one out", options: ["Eight", "Second", "Six", "Seven"], answer: "Second", exp: "Second là số thứ tự, còn lại là số đếm.", hint: "Tìm từ khác loại." },
        { id: 145, type: QuestionType.REARRANGE, parts: ["do", "Why", "you", "football?", "like"], answer: "Why do you like football?", exp: "Tại sao bạn thích bóng đá?", hint: "Bắt đầu với 'Why'." },
        { id: 146, type: QuestionType.MULTIPLE_CHOICE, text: "What’s the weather like in winter? - ...", options: ["It’s hot.", "It hot.", "It’s cold.", "It cold."], answer: "It’s cold.", exp: "Mùa đông lạnh.", hint: "Đặc trưng mùa đông." },
        { id: 147, type: QuestionType.FILL_IN_BLANK, text: "The bedrooms _ _ _ small.", answer: "are", exp: "Số nhiều dùng 'are'.", hint: "To Be số nhiều." },
        { id: 148, type: QuestionType.REARRANGE, parts: ["is", "Quang Binh", "central", "Vietnam.", "in"], answer: "Quang Binh is in central Vietnam.", exp: "Quảng Bình ở miền trung Việt Nam.", hint: "Bắt đầu bằng 'Quang Binh'." },
        { id: 149, type: QuestionType.MULTIPLE_CHOICE, text: "... notebooks are there in your schoolbag? – There are3 notebooks.", options: ["How old", "What subjects", "How many", "Who’s"], answer: "How many", exp: "How many dùng hỏi số lượng đếm được.", hint: "Hỏi bao nhiêu." },
        { id: 150, type: QuestionType.MULTIPLE_CHOICE, text: "There are _______ days in November.", options: ["thirty", "thirty one", "thirty first", "thirteen"], answer: "thirty", exp: "Tháng 11 có 30 ngày.", hint: "Số ngày trong tháng." },
        { id: 151, type: QuestionType.REARRANGE, parts: ["going to", "are they", "travel", "next year?", "Where"], answer: "Where are they going to travel next year?", exp: "Họ sẽ đi du lịch đâu sang năm?", hint: "Bắt đầu với 'Where'." },
        { id: 152, type: QuestionType.FILL_IN_BLANK, text: "Happy birthday, Phong. This gift is _ _ _ you.", answer: "for", exp: "For: dành cho.", hint: "Dành cho bạn." },
        { id: 153, type: QuestionType.FILL_IN_BLANK, text: "In Vietnam, we do not _ _ to school on Sunday.", answer: "go", exp: "Go to school: đi học.", hint: "Đi." },
        { id: 154, type: QuestionType.MULTIPLE_CHOICE, text: "Mary can ... a bicycle.", options: ["right", "ride", "rights", "rides"], answer: "ride", exp: "Ride: cưỡi/đi (xe đạp).", hint: "Hành động điều khiển xe." },
        { id: 155, type: QuestionType.MULTIPLE_CHOICE, text: "I am from America. I am ___.", options: ["America", "American", "England", "Americans"], answer: "American", exp: "Người Mỹ: American.", hint: "Quốc tịch." },
        { id: 156, type: QuestionType.MULTIPLE_CHOICE, text: " Playing the ___ is my hobby.", img: "https://plus.unsplash.com/premium_vector-1763412283136-8c3c8b22ab78?w=400", options: ["chess", "violin", "guitar", "Piano"], answer: "Piano", exp: "Chơi đàn Piano.", hint: "Nhạc cụ có phím." },
        { id: 157, type: QuestionType.REARRANGE, parts: ["school", "My", "big.", "is", "not"], answer: "My school is not big.", exp: "Trường tôi không lớn.", hint: "Bắt đầu với 'My'." },
        { id: 158, type: QuestionType.MULTIPLE_CHOICE, text: "Helen is reading a ______. ", options: ["song", "cartoon", "picture", "book"], answer: "book", exp: "Đọc một cuốn sách.", hint: "Vật phẩm để đọc." },
        { id: 159, type: QuestionType.FILL_IN_BLANK, text: "Monday is a scho_ _ day.", answer: "ol", exp: "School day: ngày đi học.", hint: "Trường học." },
        { id: 160, type: QuestionType.FILL_IN_BLANK, text: "My bedroom is sm_ ll.", answer: "a", exp: "Small: nhỏ.", hint: "Nhỏ." },
        { id: 161, type: QuestionType.REARRANGE, parts: ["TV.", "She’s reading", "comic", "books and", "he’s watching"], answer: "She’s reading comic books and he’s watching TV.", exp: "Cấu trúc hành động song song.", hint: "Bắt đầu bằng 'She's reading'." },
        { id: 162, type: QuestionType.MULTIPLE_CHOICE, text: "Odd one out:", options: ["Japan", "Singapore", "French", "America"], answer: "French", exp: "French là ngôn ngữ/quốc tịch, còn lại là tên nước.", hint: "Tìm từ khác loại." },
        { id: 163, type: QuestionType.REARRANGE, parts: ["Would", "like", "some", "you", "milk?"], answer: "Would you like some milk?", exp: "Lời mời uống sữa.", hint: "Bắt đầu với 'Would'." },
        { id: 164, type: QuestionType.MULTIPLE_CHOICE, text: "It’s not difficult ... a new dress.", options: ["make", "makes", "to make", "making"], answer: "to make", exp: "Cấu trúc: It is + adj + to V.", hint: "Để tạo ra." },
        { id: 165, type: QuestionType.MULTIPLE_CHOICE, text: "It’s rainy ... September and October.", options: ["on", "to", "in", "up"], answer: "in", exp: "In + tháng.", hint: "Giới từ cho tháng." },
        { id: 166, type: QuestionType.FILL_IN_BLANK, text: " This is my uncle. He’s Mal_ _ sian.", img: "https://media.istockphoto.com/id/1621903447/vector/flag-of-malaysia.webp?a=1&b=1&s=612x612&w=0&k=20&c=wE3vtATQHMNKSJFp2eQ2Z9qEwn3bUamXGmXUJJ71LMw=", answer: "ay", exp: "Malaysian: người Malaysia.", hint: "Thiếu 'ay'." },
        { id: 167, type: QuestionType.MULTIPLE_CHOICE, text: " Where are you ...?", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206403949518315_Audio.mp3", options: ["Tom", "some", "from", "Come"], answer: "from", exp: "Bạn từ đâu đến?", hint: "Xuất xứ." },
        { id: 168, type: QuestionType.MULTIPLE_CHOICE, text: " They like ... .", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206419380949920_Audio.mp3", options: ["playing", "swimming", "singing", "Speaking"], answer: "singing", exp: "Họ thích hát.", hint: "Hành động hát." },
        { id: 169, type: QuestionType.REARRANGE, parts: ["twice", "a week.", "have", "Music", "I"], answer: "I have Music twice a week.", exp: "Tôi học nhạc 2 lần 1 tuần.", hint: "Bắt đầu với 'I'." },
        { id: 170, type: QuestionType.MULTIPLE_CHOICE, text: " Tom and Lan can do many ... .", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206418611848843_Audio.mp3", options: ["sing", "think", "things", "Thank"], answer: "things", exp: "Làm nhiều việc (things).", hint: "Việc/thứ." },
        { id: 171, type: QuestionType.REARRANGE, parts: ["of", "Nam’s school?", "is", "What", "the name"], answer: "What is the name of Nam’s school?", exp: "Tên trường Nam là gì?", hint: "Bắt đầu bằng 'What is'." },
        { id: 172, type: QuestionType.MULTIPLE_CHOICE, text: "Can you swim, Mary? – Yes, I ... .", options: ["are", "am", "can", "can’t"], answer: "can", exp: "Có, tôi có thể.", hint: "Phù hợp câu hỏi 'Can'." },
        { id: 173, type: QuestionType.MULTIPLE_CHOICE, text: "... do you like Music? – Because I like to sing.", options: ["How", "When", "Why", "Who"], answer: "Why", exp: "Why dùng hỏi lý do.", hint: "Câu trả lời có 'Because'." },
        { id: 174, type: QuestionType.MULTIPLE_CHOICE, text: " What does Phuong do on Saturdays? – She goes to the___.", img: "https://plus.unsplash.com/premium_vector-1729239907383-521490651d3c?w=400", options: ["cinema", "zoo", "amusement park", "Park"], answer: "zoo", exp: "Cô ấy đi sở thú.", hint: "Có nhiều con vật." },
        { id: 175, type: QuestionType.MULTIPLE_CHOICE, text: "Linda _______ swim.", options: ["is", "play", "can", "do"], answer: "can", exp: "Có thể bơi.", hint: "Khả năng." },
        { id: 176, type: QuestionType.REARRANGE, parts: ["Singapore.", "She", "from", "is"], answer: "She is from Singapore.", exp: "Cô ấy đến từ Singapore.", hint: "Bắt đầu với 'She'." },
        { id: 177, type: QuestionType.FILL_IN_BLANK, text: "Tony is fr_ _ Australia.", answer: "om", exp: "From: từ.", hint: "Thiếu 'om'." },
        { id: 178, type: QuestionType.FILL_IN_BLANK, text: "What _ _ _ _ do you go to school?", answer: "time", exp: "Hỏi giờ.", hint: "Mấy giờ (4 chữ cái)." },
        { id: 179, type: QuestionType.MULTIPLE_CHOICE, text: "Choose the odd one out:", options: ["badminton", "baseball", "playground", "basketball"], answer: "playground", exp: "Sân chơi là địa điểm, còn lại là môn thể thao.", hint: "Tìm từ khác loại." },
        { id: 180, type: QuestionType.REARRANGE, parts: ["holiday", "last month.", "My aunt", "in Nha Trang", "went on"], answer: "My aunt went on holiday in Nha Trang last month.", exp: "Dì tôi đi nghỉ ở Nha Trang tháng trước.", hint: "Bắt đầu bằng 'My aunt'." },
        { id: 181, type: QuestionType.FILL_IN_BLANK, text: "This is the w_ y we go to school.", answer: "a", exp: "Way: con đường.", hint: "Con đường." },
        { id: 182, type: QuestionType.REARRANGE, parts: ["is your", "What", "favourite", "comic book?"], answer: "What is your favourite comic book?", exp: "Cuốn truyện tranh ưa thích của bạn là gì?", hint: "Bắt đầu với 'What is'." },
        { id: 183, type: QuestionType.REARRANGE, parts: ["She", "spell", "her name.", "doesn’t know", "how to"], answer: "She doesn’t know how to spell her name.", exp: "Cô ấy không biết đánh vần tên.", hint: "Bắt đầu với 'She'." },
        { id: 184, type: QuestionType.FILL_IN_BLANK, text: "W_ _ _ _ was your mother yesterday?", answer: "here", exp: "Where: ở đâu.", hint: "Hỏi nơi chốn." },
        { id: 185, type: QuestionType.REARRANGE, parts: ["four", "the room?", "in", "Are there", "chairs"], answer: "Are there four chairs in the room?", exp: "Có 4 cái ghế trong phòng không?", hint: "Bắt đầu bằng 'Are there'." },
        { id: 186, type: QuestionType.MULTIPLE_CHOICE, text: "Those are my ... .", options: ["ruler", "rulers", "a ruler", "the ruler"], answer: "rulers", exp: "Rulers số nhiều cho 'Those'.", hint: "Những cái thước." },
        { id: 187, type: QuestionType.FILL_IN_BLANK, text: "I’m from Japan. I’m Japan_ _ e.", answer: "es", exp: "Japanese: người Nhật.", hint: "Thiếu 'es'." },
        { id: 188, type: QuestionType.FILL_IN_BLANK, text: "She is a hard-_ _ _ _ _ _ _ student in my class.", answer: "working", exp: "Hard-working: chăm chỉ.", hint: "Chăm chỉ." },
        { id: 189, type: QuestionType.FILL_IN_BLANK, text: "H_ _ _ y birthday to you.", answer: "app", exp: "Happy: hạnh phúc.", hint: "Từ trong câu chúc sinh nhật." },
        { id: 190, type: QuestionType.MULTIPLE_CHOICE, text: " They like ... .", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206431247676534_Audio.mp3", options: ["playing", "swimming", "singing", "Speaking"], answer: "singing", exp: "Họ thích hát.", hint: "Hành động hát." },
        { id: 191, type: QuestionType.FILL_IN_BLANK, text: "Today I ha_ e Maths and Music.", answer: "v", exp: "Have: có.", hint: "Có." },
        { id: 192, type: QuestionType.REARRANGE, parts: ["classmate.", "a", "I", "have", "new"], answer: "I have a new classmate.", exp: "Tôi có một bạn cùng lớp mới.", hint: "Bắt đầu với 'I'." },
        { id: 193, type: QuestionType.MULTIPLE_CHOICE, text: "Can I ... your name, please? - I’m Simon Cowell.", options: ["do", "have", "does", "has"], answer: "have", exp: "Cấu trúc hỏi tên lịch sự.", hint: "Tôi có thể 'biết'..." },
        { id: 194, type: QuestionType.FILL_IN_BLANK, text: "C_ _ you play the piano, Phuong?", answer: "an", exp: "Can: có thể.", hint: "Có thể." },
        { id: 195, type: QuestionType.MULTIPLE_CHOICE, text: " Where are you ...?", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206442193321320_Audio.mp3", options: ["Tom", "some", "from", "Come"], answer: "from", exp: "Hỏi nơi đến.", hint: "Thiếu 'from'." },
        { id: 196, type: QuestionType.MULTIPLE_CHOICE, text: " The birthday is on the ___ of March.", img: "https://media.istockphoto.com/id/1829960849/vector/march-26-daily-calendar-icon-in-flat-design-style-on-blank-background.webp?a=1&b=1&s=612x612&w=0&k=20&c=Bma7z9PDy7DaWkvK3iwfrcO0PyJ5YZPsG9pqxD58YZE=", options: ["twenty-sixth", "twenty-eighth", "twenty-six", "twentieth-six"], answer: "twenty-sixth", exp: "Ngày 26 dùng số thứ tự.", hint: "Thứ 26." },
        { id: 197, type: QuestionType.REARRANGE, parts: ["milk?", "some", "like", "you", "Would"], answer: "Would you like some milk?", exp: "Câu mời lịch sự.", hint: "Bắt đầu với 'Would'." },
        { id: 198, type: QuestionType.FILL_IN_BLANK, text: "Vietnamese is my _ _ _ _ urite subject.", answer: "favo", exp: "Favourite: ưa thích nhất.", hint: "Ưa thích nhất." },
        { id: 199, type: QuestionType.MULTIPLE_CHOICE, text: " Listen and tick:", audio: "https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/11/21/635206409407725957_Audio.mp3", options: ["He can speak English.", "He can’t speak English.", "She can speak English.", "She can’t speak English."], answer: "He can speak English.", exp: "Anh ấy có thể nói tiếng Anh.", hint: "Chú ý 'He' và 'can'." },
        { id: 200, type: QuestionType.FILL_IN_BLANK, text: "This gift is _ _ r you. – Many thanks.", answer: "fo", exp: "For you: dành cho bạn.", hint: "Cho bạn." }
      ];

      const FINAL_DATA = RAW_QUESTIONS;

      const shuffle = (array) => {
        const arr = [...array];
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      };

      // --- COMPONENTS ---
      const Button = ({ children, variant = 'primary', className = '', ...props }) => {
        const variants = {
          primary: "bg-indigo-600 text-white shadow-indigo-100 hover:bg-indigo-700",
          secondary: "bg-emerald-500 text-white shadow-emerald-100 hover:bg-emerald-600",
          danger: "bg-rose-500 text-white shadow-rose-100 hover:bg-rose-600",
          outline: "bg-white border-2 border-slate-200 text-slate-600 hover:border-indigo-500 hover:text-indigo-600"
        };
        return (
          <button className={`px-6 py-3 rounded-2xl font-bold transition-all btn-pop shadow-md flex items-center justify-center gap-2 disabled:opacity-50 ${variants[variant]} ${className}`} {...props}>
            {children}
          </button>
        );
      };

      const QuestionContent = ({ question, onAnswer, isAnswered, userAnswer }) => {
        const [fibInput, setFibInput] = useState('');
        const [reParts, setReParts] = useState([]);
        const [showHint, setShowHint] = useState(false);

        const jumbledParts = useMemo(() => {
          if (question.type === QuestionType.REARRANGE && question.parts) {
            return shuffle(question.parts);
          }
          return [];
        }, [question.id]);

        useEffect(() => {
          setFibInput('');
          setReParts([]);
          setShowHint(false);
        }, [question.id]);

        const normalize = (s) => s ? s.replace(/[.,!?;:'"]/g, '').replace(/\s+/g, ' ').trim().toLowerCase() : "";
        const isCorrect = userAnswer && normalize(userAnswer) === normalize(question.answer);

        const checkAnswer = () => {
          if (question.type === QuestionType.REARRANGE) onAnswer(reParts.join(' '));
          else onAnswer(fibInput.trim());
        };

        const handleKeyDown = (e) => {
          if (e.key === 'Enter' && !isAnswered) {
            if (question.type === QuestionType.FILL_IN_BLANK && fibInput.trim()) checkAnswer();
            if (question.type === QuestionType.REARRANGE && reParts.length > 0) checkAnswer();
          }
        };

        const toggleRePart = (p) => {
          if (isAnswered) return;
          if (reParts.includes(p)) setReParts(reParts.filter(x => x !== p));
          else setReParts([...reParts, p]);
        };

        return (
          <div className="w-full max-w-2xl mx-auto question-card-enter" onKeyDown={handleKeyDown} tabIndex="0">
            <div className="bg-white rounded-[2.5rem] shadow-2xl p-6 sm:p-10 border border-slate-100 outline-none">
              <div className="flex justify-between items-center mb-6">
                <span className="bg-slate-100 text-slate-500 px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest">
                  {question.type === 'MC' ? 'Trắc nghiệm' : question.type === 'FIB' ? 'Điền từ' : 'Sắp xếp'}
                </span>
                <button 
                  onClick={() => setShowHint(!showHint)} 
                  className={`text-[10px] font-bold px-3 py-1 rounded-lg border transition-all ${showHint ? 'bg-amber-500 text-white border-amber-600' : 'text-amber-600 bg-amber-50 border-amber-100'}`}
                >
                  {showHint ? 'ẨN GỢI Ý' : 'GỢI Ý 💡'}
                </button>
              </div>

              {question.img && <img src={question.img} className="w-full h-48 object-cover rounded-3xl mb-6 shadow-md border border-slate-100" alt="minh họa" />}
              
              {question.audio && (
                <div className="mb-6 flex justify-center">
                  <button onClick={() => new Audio(question.audio).play()} className="p-4 bg-indigo-600 text-white rounded-2xl flex items-center gap-3 shadow-lg btn-pop">
                    <span className="text-2xl">🔊</span> <span className="font-bold">Bấm để nghe</span>
                  </button>
                </div>
              )}

              {showHint && !isAnswered && (
                <div className="mb-6 p-5 bg-amber-50 border-l-8 border-amber-400 rounded-2xl text-amber-900 font-bold text-base shadow-sm animate-slide-up">
                  <div className="flex items-center gap-2 mb-1">
                    <span className="text-xl">💡</span> <span className="text-xs uppercase font-black opacity-60">Gợi ý chi tiết:</span>
                  </div>
                  {question.hint || `Đáp án có ${question.answer.length} ký tự.`}
                </div>
              )}

              <h2 className="text-3xl font-nunito font-black text-slate-800 mb-8 leading-tight text-center">
                {question.text || 'Sắp xếp các từ sau thành câu đúng:'}
              </h2>

              {question.type === QuestionType.MULTIPLE_CHOICE && (
                <div className="grid grid-cols-1 gap-3">
                  {question.options.map((opt, i) => {
                    const isSelected = userAnswer === opt;
                    const isCorr = normalize(opt) === normalize(question.answer);
                    let cls = "bg-slate-50 border-slate-100 hover:border-indigo-300";
                    if (isAnswered) {
                        if (isCorr) cls = "bg-emerald-50 border-emerald-500 text-emerald-900 ring-4 ring-emerald-100";
                        else if (isSelected) cls = "bg-rose-50 border-rose-500 text-rose-900 ring-4 ring-rose-100";
                        else cls = "opacity-40 border-slate-100 grayscale pointer-events-none";
                    }
                    return (
                      <button key={i} onClick={() => !isAnswered && onAnswer(opt)} disabled={isAnswered} className={`w-full p-5 rounded-2xl text-left border-2 transition-all flex items-center gap-4 ${cls}`}>
                        <span className={`w-10 h-10 shrink-0 rounded-xl flex items-center justify-center text-lg font-black ${isAnswered && isCorr ? 'bg-emerald-500 text-white' : 'bg-white text-slate-400 shadow-sm'}`}>
                          {String.fromCharCode(65+i)}
                        </span>
                        <span className="text-xl font-bold">{opt}</span>
                      </button>
                    );
                  })}
                </div>
              )}

              {question.type === QuestionType.FILL_IN_BLANK && (
                <div className="space-y-6">
                  <input 
                    type="text" 
                    placeholder="Nhập đáp án..." 
                    value={isAnswered ? userAnswer : fibInput} 
                    onChange={e => setFibInput(e.target.value)} 
                    onKeyDown={handleKeyDown}
                    disabled={isAnswered} 
                    autoFocus
                    className={`w-full p-6 rounded-3xl border-4 text-3xl font-black text-center outline-none transition-all ${isAnswered ? (isCorrect ? 'border-emerald-500 bg-emerald-50 text-emerald-800' : 'border-rose-500 bg-rose-50 text-rose-800') : 'border-slate-100 bg-slate-50 focus:border-indigo-500 focus:bg-white focus:ring-8 focus:ring-indigo-100'}`} 
                  />
                  {!isAnswered && <Button onClick={checkAnswer} className="w-full !py-5 text-xl" disabled={!fibInput.trim()}>XÁC NHẬN (ENTER)</Button>}
                </div>
              )}

              {question.type === QuestionType.REARRANGE && (
                <div className="space-y-6">
                  <div className="flex flex-wrap gap-2.5 p-5 bg-slate-50 rounded-2xl border border-slate-200 min-h-[100px] justify-center items-center shadow-inner">
                    {jumbledParts.map((p, i) => (
                      <button key={i} onClick={() => toggleRePart(p)} disabled={isAnswered || reParts.includes(p)} className={`px-5 py-3 rounded-xl bg-white border-2 border-slate-200 font-black text-lg shadow-sm transition-all active:scale-90 ${reParts.includes(p) ? 'opacity-20 scale-95' : 'hover:border-indigo-400 hover:text-indigo-600'}`}>{p}</button>
                    ))}
                  </div>
                  <div className={`min-h-[120px] p-6 rounded-[2rem] border-4 border-dashed flex flex-wrap gap-3 justify-center items-center transition-all ${isAnswered ? (isCorrect ? 'border-emerald-500 bg-emerald-50' : 'border-rose-500 bg-rose-50') : 'border-slate-200 bg-white'}`}>
                    {reParts.length === 0 && !isAnswered && <span className="text-slate-300 font-bold italic">Bấm chọn các từ vựng phía trên...</span>}
                    {reParts.map((p, i) => (
                      <button key={i} onClick={() => toggleRePart(p)} disabled={isAnswered} className="bg-indigo-600 text-white px-5 py-3 rounded-xl font-black text-lg shadow-lg animate-slide-up">{p}</button>
                    ))}
                  </div>
                  {!isAnswered && (
                    <div className="flex gap-4">
                      <Button variant="outline" onClick={() => setReParts([])} className="flex-1 !rounded-2xl">LÀM LẠI</Button>
                      <Button onClick={checkAnswer} className="flex-[2] !py-5 text-xl !rounded-2xl" disabled={reParts.length === 0}>XÁC NHẬN (ENTER)</Button>
                    </div>
                  )}
                </div>
              )}

              {isAnswered && (
                <div className={`mt-8 p-6 rounded-3xl border-l-[12px] shadow-lg animate-slide-in ${isCorrect ? 'bg-emerald-50 border-emerald-500' : 'bg-rose-50 border-rose-500'}`}>
                  <div className="flex items-start gap-5">
                    <div className={`w-14 h-14 rounded-2xl flex items-center justify-center text-white text-3xl font-black shadow-md ${isCorrect ? 'bg-emerald-500' : 'bg-rose-500'}`}>
                      {isCorrect ? '✓' : '✕'}
                    </div>
                    <div className="flex-1">
                      <h3 className={`text-2xl font-black mb-2 ${isCorrect ? 'text-emerald-800' : 'text-rose-800'}`}>{isCorrect ? 'CHÍNH XÁC!' : 'SAI MẤT RỒI!'}</h3>
                      {!isCorrect && (
                        <div className="mb-3 p-3 bg-white/80 rounded-xl border border-rose-100">
                           <p className="text-[10px] font-black text-rose-400 uppercase tracking-widest mb-1">Đáp án đúng là:</p>
                           <p className="text-xl font-black text-slate-800 leading-tight">{question.answer}</p>
                        </div>
                      )}
                      <p className="text-slate-700 font-bold leading-relaxed">
                        <span className="text-indigo-600 text-xs font-black mr-2 uppercase bg-indigo-50 px-2 py-0.5 rounded">Giải thích:</span>
                        {question.exp}
                      </p>
                    </div>
                  </div>
                </div>
              )}
            </div>
          </div>
        );
      };

      const StartScreen = ({ onStart }) => {
        const [name, setName] = useState(localStorage.getItem('ioe_name') || '');
        return (
          <div className="min-h-screen flex items-center justify-center bg-indigo-600 p-6 relative overflow-hidden">
            <div className="bg-white rounded-[3.5rem] shadow-2xl p-10 sm:p-16 max-w-xl w-full text-center relative z-10 border-8 border-white">
              <span className="text-8xl mb-8 block animate-float">🎓</span>
              <h1 className="text-5xl font-nunito font-black text-slate-800 mb-2 tracking-tighter">IOE LỚP 4</h1>
              <p className="text-slate-400 font-black uppercase tracking-widest text-sm mb-12">BỘ ĐỀ ÔN TẬP SỐ 09 - 200 CÂU</p>
              <form onSubmit={e => { e.preventDefault(); name.trim() && onStart(name); }} className="space-y-6 text-left">
                <label className="text-xs font-black text-slate-400 uppercase tracking-widest ml-4">Tên người chơi:</label>
                <input type="text" value={name} onChange={e => setName(e.target.value)} placeholder="NHẬP TÊN CỦA BẠN" required className="w-full px-8 py-6 rounded-3xl border-4 border-slate-100 text-2xl font-black text-center outline-none focus:border-indigo-500 transition-all uppercase shadow-inner" />
                <Button type="submit" className="w-full !py-7 text-2xl !rounded-[2rem] shadow-xl">VÀO THI NGAY</Button>
              </form>
            </div>
          </div>
        );
      };

      const ResultScreen = ({ userName, userAnswers, score, onRetryAll, onRetryWrong }) => {
        const [showReview, setShowReview] = useState(false);
        const correctCount = userAnswers.filter(a => a.isCorr).length;
        const total = userAnswers.length;
        const percent = total > 0 ? Math.round((correctCount / total) * 100) : 0;
        const wrongOnes = userAnswers.filter(a => !a.isCorr);

        useEffect(() => {
          if (percent > 70) confetti({ particleCount: 200, spread: 90, origin: { y: 0.6 } });
        }, []);

        return (
          <div className="min-h-screen bg-slate-50 flex flex-col items-center justify-center p-6 py-12">
            <div className="bg-white rounded-[4rem] p-10 sm:p-16 shadow-2xl text-center max-w-3xl w-full border-4 border-white animate-slide-in">
              <span className="text-8xl mb-8 block"> {percent > 85 ? '🌟' : percent > 50 ? '🍀' : '💪'} </span>
              <h2 className="text-5xl font-nunito font-black text-slate-800 mb-2 uppercase">KẾT QUẢ</h2>
              <p className="text-slate-400 font-bold uppercase tracking-widest text-sm mb-10">Người chơi: <span className="text-indigo-600">{userName}</span></p>
              
              <div className="grid grid-cols-2 gap-6 mb-12">
                <div className="bg-indigo-50 p-10 rounded-[3rem] border border-indigo-100 flex flex-col items-center shadow-sm">
                    <p className="text-5xl font-black text-indigo-600">{score}</p>
                    <p className="text-[11px] font-black text-indigo-400 uppercase tracking-widest mt-2">Tổng Điểm</p>
                </div>
                <div className="bg-emerald-50 p-10 rounded-[3rem] border border-emerald-100 flex flex-col items-center shadow-sm">
                    <p className="text-5xl font-black text-emerald-600">{percent}%</p>
                    <p className="text-[11px] font-black text-emerald-400 uppercase tracking-widest mt-2">Độ chính xác</p>
                </div>
              </div>

              <div className="flex flex-col sm:flex-row gap-4 mb-10">
                <Button onClick={onRetryAll} className="flex-1 !py-6 text-xl !rounded-[2rem]">CHƠI LẠI TỪ ĐẦU</Button>
                {wrongOnes.length > 0 && (
                  <Button onClick={onRetryWrong} variant="danger" className="flex-1 !py-6 text-xl !rounded-[2rem]">LÀM LẠI CÂU SAI</Button>
                )}
                <Button onClick={() => setShowReview(!showReview)} variant="outline" className="flex-1 !py-6 text-xl !rounded-[2rem]">
                  {showReview ? 'ĐÓNG XEM LẠI' : 'ÔN TẬP CÂU SAI'}
                </Button>
              </div>

              {showReview && (
                <div className="text-left space-y-5 max-h-[500px] overflow-y-auto pr-3 custom-scrollbar border-t-2 pt-8">
                  <h3 className="text-2xl font-black text-slate-800 uppercase mb-6 flex items-center gap-3">
                    <span className="w-10 h-10 bg-rose-500 text-white rounded-xl flex items-center justify-center text-sm">!</span> 
                    Danh sách câu sai ({wrongOnes.length} câu):
                  </h3>
                  {wrongOnes.map((ans, idx) => {
                    const q = RAW_QUESTIONS.find(x => x.id === ans.qId);
                    return q ? (
                      <div key={idx} className="bg-white p-6 rounded-3xl border-2 border-slate-100 hover:border-indigo-200 transition-all shadow-sm">
                        <span className="text-[10px] font-black px-3 py-1 bg-slate-100 text-slate-500 rounded-lg uppercase">Câu {q.id}</span>
                        <p className="font-black text-slate-800 mb-4 text-xl leading-snug mt-2">{q.text || 'Sắp xếp câu: ' + q.answer}</p>
                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm mb-4">
                          <div className="p-4 bg-rose-50 rounded-2xl border border-rose-100">
                            <p className="text-[10px] font-bold text-rose-400 uppercase tracking-wider mb-1">Bạn trả lời:</p>
                            <p className="font-black text-rose-900 text-lg">{ans.resp || "(Bỏ trống)"}</p>
                          </div>
                          <div className="p-4 bg-emerald-50 rounded-2xl border border-emerald-100">
                            <p className="text-[10px] font-bold text-emerald-400 uppercase tracking-wider mb-1">Đáp án đúng:</p>
                            <p className="font-black text-emerald-900 text-lg">{q.answer}</p>
                          </div>
                        </div>
                        <div className="p-4 bg-indigo-50/50 rounded-2xl">
                           <p className="text-sm text-slate-600 font-bold leading-relaxed">
                            <span className="font-black text-indigo-600 text-[10px] uppercase mr-2 bg-indigo-100 px-2 py-0.5 rounded">Giải thích:</span> 
                            {q.exp}
                           </p>
                        </div>
                      </div>
                    ) : null;
                  })}
                </div>
              )}
            </div>
          </div>
        );
      };

      const App = () => {
        const [gameState, setGameState] = useState(GameState.START);
        const [userName, setUserName] = useState('');
        const [activeQuestions, setActiveQuestions] = useState(FINAL_DATA);
        const [currentIndex, setCurrentIndex] = useState(0);
        const [userAnswers, setUserAnswers] = useState([]);
        const [score, setScore] = useState(0);
        const [timeLeft, setTimeLeft] = useState(TOTAL_TIME);
        const [showList, setShowList] = useState(false);

        useEffect(() => {
          let timer;
          if (gameState === GameState.PLAYING && timeLeft > 0) {
            timer = setInterval(() => setTimeLeft(p => p - 1), 1000);
          } else if (timeLeft === 0 && gameState === GameState.PLAYING) setGameState(GameState.FINISHED);
          return () => clearInterval(timer);
        }, [gameState, timeLeft]);

        const handleAnswer = (resp) => {
          const q = activeQuestions[currentIndex];
          const isCorr = resp.replace(/[.,!?;:'"]/g, '').replace(/\s+/g, ' ').trim().toLowerCase() === q.answer.toLowerCase();
          
          if (isCorr) setScore(s => s + POINTS_PER_CORRECT);
          setUserAnswers(prev => [...prev.filter(a => a.qId !== q.id), { qId: q.id, resp, isCorr }]);
        };

        const handleRetryWrong = () => {
          const wrongIds = userAnswers.filter(a => !a.isCorr).map(a => a.qId);
          const wrongQuests = RAW_QUESTIONS.filter(q => wrongIds.includes(q.id));
          setActiveQuestions(wrongQuests);
          setCurrentIndex(0);
          setUserAnswers([]);
          setScore(0);
          setTimeLeft(TOTAL_TIME);
          setGameState(GameState.PLAYING);
        };

        const handleRetryAll = () => {
          setActiveQuestions(FINAL_DATA);
          setCurrentIndex(0);
          setUserAnswers([]);
          setScore(0);
          setTimeLeft(TOTAL_TIME);
          setGameState(GameState.PLAYING);
        };

        const onJump = (idx) => { setCurrentIndex(idx); setShowList(false); };

        if (gameState === GameState.START) return <StartScreen onStart={n => { setUserName(n); setGameState(GameState.PLAYING); localStorage.setItem('ioe_name', n); }} />;

        if (gameState === GameState.FINISHED) {
            return <ResultScreen 
              userName={userName} 
              userAnswers={userAnswers} 
              score={score}
              onRetryAll={handleRetryAll}
              onRetryWrong={handleRetryWrong}
            />;
        }

        const currentQ = activeQuestions[currentIndex];
        const answer = userAnswers.find(a => a.qId === currentQ.id);
        const progress = ((currentIndex + 1) / activeQuestions.length) * 100;

        return (
          <div className="min-h-screen bg-slate-50 flex flex-col p-4 pb-32">
            <div className="w-full max-w-4xl mx-auto mb-6">
              <div className="glass rounded-[2rem] p-4 flex flex-wrap items-center justify-between gap-4 shadow-xl border-4 border-white">
                <div className="flex items-center gap-3">
                  <div className="w-12 h-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white font-black text-xl shadow-lg">
                    {userName[0]?.toUpperCase() || 'U'}
                  </div>
                  <div className="hidden sm:block">
                    <p className="text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none">Người chơi</p>
                    <p className="text-lg font-black text-slate-800 truncate max-w-[120px]">{userName}</p>
                  </div>
                </div>
                <div className="flex items-center gap-8">
                  <div className="text-center">
                    <p className="text-[10px] font-black text-slate-400 uppercase leading-none">Thời gian</p>
                    <p className={`text-2xl font-black ${timeLeft < 60 ? 'text-rose-500 animate-pulse' : 'text-slate-800'}`}>
                      {Math.floor(timeLeft / 60)}:{(timeLeft % 60).toString().padStart(2, '0')}
                    </p>
                  </div>
                  <div className="text-center">
                    <p className="text-[10px] font-black text-slate-400 uppercase leading-none">Điểm</p>
                    <p className="text-2xl font-black text-indigo-600">{score}</p>
                  </div>
                </div>
                <Button variant="outline" className="!px-5 !py-3 !rounded-2xl text-xs !border-slate-100 shadow-sm" onClick={() => setShowList(true)}>📋 DANH SÁCH</Button>
              </div>
              <div className="mt-5 px-3">
                <div className="w-full h-3 bg-slate-200 rounded-full overflow-hidden shadow-inner">
                  <div className="h-full bg-gradient-to-r from-indigo-500 to-indigo-700 transition-all duration-700 ease-out" style={{ width: `${progress}%` }}></div>
                </div>
              </div>
            </div>

            <QuestionContent question={currentQ} onAnswer={handleAnswer} isAnswered={!!answer} userAnswer={answer?.resp} />
            
            <div className="fixed bottom-0 left-0 right-0 p-8 bg-white/80 backdrop-blur-xl border-t border-slate-200 z-50 flex justify-center shadow-2xl">
              <div className="w-full max-w-2xl flex gap-4 items-center">
                <Button variant="outline" onClick={() => setCurrentIndex(Math.max(0, currentIndex - 1))} disabled={currentIndex === 0} className="!p-5 !rounded-2xl shrink-0 border-2">←</Button>
                <div className="flex-1">
                  {answer ? (
                    <Button onClick={() => currentIndex === activeQuestions.length - 1 ? setGameState(GameState.FINISHED) : setCurrentIndex(currentIndex + 1)} className="w-full !py-5 text-2xl !rounded-2xl shadow-indigo-200" variant="secondary">
                        {currentIndex === activeQuestions.length - 1 ? 'XEM KẾT QUẢ 🏁' : 'CÂU TIẾP THEO →'}
                    </Button>
                  ) : (
                    <Button onClick={() => setCurrentIndex(Math.min(activeQuestions.length - 1, currentIndex + 1))} variant="outline" className="w-full !py-5 !rounded-2xl font-black text-slate-300 border-dashed hover:border-indigo-400 hover:text-indigo-400">BỎ QUA CÂU NÀY</Button>
                  )}
                </div>
                <Button variant="outline" onClick={() => setCurrentIndex(Math.min(activeQuestions.length - 1, currentIndex + 1))} disabled={currentIndex === activeQuestions.length - 1 || !answer} className="!p-5 !rounded-2xl shrink-0 border-2">→</Button>
              </div>
            </div>

            {showList && (
              <div className="fixed inset-0 z-[100] bg-slate-900/70 backdrop-blur-md flex items-center justify-center p-4">
                <div className="bg-white rounded-[3rem] shadow-2xl w-full max-w-3xl max-h-[85vh] flex flex-col overflow-hidden animate-slide-up border-8 border-white">
                    <div className="p-8 border-b flex justify-between items-center bg-slate-50">
                        <div>
                           <h2 className="text-3xl font-black text-slate-800 uppercase tracking-tighter">DANH SÁCH CÂU HỎI</h2>
                           <p className="text-xs font-bold text-slate-400 uppercase tracking-widest">{activeQuestions.length} CÂU TRONG LƯỢT THI NÀY</p>
                        </div>
                        <button onClick={() => setShowList(false)} className="w-12 h-12 flex items-center justify-center text-3xl font-black text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-2xl transition-all">✕</button>
                    </div>
                    <div className="flex-1 overflow-y-auto p-8 grid grid-cols-5 sm:grid-cols-10 gap-3 custom-scrollbar bg-white shadow-inner">
                        {activeQuestions.map((q, i) => {
                            const ans = userAnswers.find(a => a.qId === q.id);
                            let cls = "bg-slate-50 text-slate-300 border-slate-100 hover:border-indigo-200";
                            if (i === currentIndex) cls = "ring-4 ring-indigo-500 bg-white text-indigo-600 border-indigo-500 scale-110 z-10";
                            else if (ans) cls = ans.isCorr ? "bg-emerald-500 text-white border-emerald-600" : "bg-rose-500 text-white border-rose-600";
                            return <button key={i} onClick={() => onJump(i)} className={`h-14 rounded-2xl font-black text-lg border-2 transition-all transform active:scale-95 ${cls}`}>{q.id}</button>
                        })}
                    </div>
                    <div className="p-4 bg-slate-50 border-t text-[10px] font-black text-slate-400 flex gap-8 justify-center uppercase tracking-widest">
                       <div className="flex items-center gap-2"><span className="w-4 h-4 bg-emerald-500 rounded-lg"></span> Đúng</div>
                       <div className="flex items-center gap-2"><span className="w-4 h-4 bg-rose-500 rounded-lg"></span> Sai</div>
                       <div className="flex items-center gap-2"><span className="w-4 h-4 bg-slate-200 rounded-lg"></span> Chưa làm</div>
                    </div>
                </div>
              </div>
            )}
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
</body>
</html>
